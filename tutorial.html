<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ManyKey.org - Open source tools for custom keyboard interfaces</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300italic,700,700italic">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="img/favbold.png">
    <link rel="apple-touch-icon-precomposed" href="img/manykeysquare.png">
  </head>
  <body>
    <header>
      <div class="container">
        <div class="row" style="margin-bottom: 0;">
          <div class="col-xs-12 col-md-4">
            <h1><a href="https://www.manykey.org"><img src="img/manykeylogo.png" alt="ManyKey.org Logo" title="ManyKey.org" width="160px"/></a></h1>
          </div>
          <div class="col-xs-12 col-md-8 bottom-align-text">
            <a class="btn btn-link btn-sm" title="Open Source Projects" href="index.html">Open Source Projects</a>
            <a class="btn btn-link btn-sm disabled" title="Tutorials" href="tutorial.html">Tutorial</a>
            <script language="JavaScript"><!-- 
            epIdCHKCCnjeFuEWgUbGwzxUdXEboSmyC="&#101;&#112;&#98;a&#114;&#103;&#101;r"
            TSoHSFOfpaKNybVdfTJo="&#64;"
            nUa="&#103;&#109;a&#105;&#108;.&#99;&#111;m"
            FmjuxQOrNDOVb="&#67;&#111;&#110;&#116;a&#99;&#116;"
            iYUJZRdTikiXnNvHGdZCIJvqcCKQGOTBY="&#67;&#111;&#110;&#116;a&#99;&#116;"
            document.write("<a class='btn btn-link btn-sm' href='mailto:"+epIdCHKCCnjeFuEWgUbGwzxUdXEboSmyC+""+TSoHSFOfpaKNybVdfTJo+""+nUa+"' title='"+iYUJZRdTikiXnNvHGdZCIJvqcCKQGOTBY+"'>"+FmjuxQOrNDOVb+"<\/a>")
            // --></script>
          </div>
        </div>
      </div>
    </header>

    <div class="container" id="main-content">
      <div class='intro'>
        <h2 class="page-header"> Tutorial - Build a ManyKey Macro Keyboard</h2>
      </div>
      <div id='tutorial'>
        <img src="img/tutorial/finished.jpg"/>

        <h3> Table of Contents </h3>
        <ol>
          <li><a href="#intro" >Introduction</a></li>
          <li><a href="#parts" >Required parts and tools</a></li>
          <li><a href="#assembly" >Hardware assembly</a></li>
          <li><a href="#writer" >Using ManyKey Writer</a></li>
          <li><a href="#conclusion">Conclusion</a></li>
        </ol>

        <hr>
        <h3 id="intro">Introduction</h3>
        <div>
          <p>So you want to build a ManyKey macro keyboard? That's great!</p>
          <p>The first thing you'll want to do is decide the form-factor of your keyboard. Do you want a neat package that sits on your desk? Buttons for your feet to control? Something else entirely? This decision will dictate what parts you'll need to buy, though the majority of this tutorial will apply to anything you build.</p>
          <p>For the purposes of this tutorial, we'll be building a three button foot keyboard.</p>
        </div>

        <hr>
        <h3 id="parts">Required parts and tools</h3>
        <div>
          <p> Here are the tools we will need to build our three button foot keyboard. </p>
          <ul>
            <li> Soldering iron, and some solder </li>
            <li> Typical size philips head screwdriver </li>
            <li> Adjustable wrench </li>
            <li> Drill, with a 1/2" bit and a small bit for pilot holes </li>
            <li> Computer </li>
          </ul>
          <p> And here are the components we'll be using! </p>
          <ul>
            <li> Wire, preferably black and at least one other color - <a href="https://www.amazon.com/StrivedayTMFlexible-Silicone-Electric-electronic-electrics/dp/B01LH1FR6M">Amazon</a></li>
            <li> 3 normally-open SPST momentary foot switches - <a href="http://www.ebay.com/itm/SPST-Momentary-Foot-Switch-Normally-Open-for-Guitar-Pedals-/252087555099">Ebay</a></li>
            <li> An Arduino Leonardo compatible microcontroller (needs ATmega32u4) - <a href="https://www.sparkfun.com/products/12640">Sparkfun</a> or <a href="http://www.ebay.com/itm/New-Leonardo-Pro-Micro-ATmega32U4-5V-16MHz-Replace-ATmega328-Arduino-Pro-Mini-/232428603888">Ebay</a></li>
            <li> Aluminum enclosure - <a href="http://www.mouser.com/Search/ProductDetail.aspx?R=1590BX2BK">Mouser</a></li>
            <li> 10ft micro USB cable - <a href="https://www.amazon.com/gp/product/B00DYWC26G">Amazon</a></li>
            <li> Plastic panel mount strain relief - <a href="http://www.mouser.com/ProductDetail/Heyco/1150/?qs=sGAEpiMZZMt5bLT1twLkekBmcyfK3xb%2fhNfNrG1Zcuc%3d">Mouser</a></li>
          </ul>
        </div>

        <hr>
        <h3 id="assembly">Assembly</h3>
        <div>
          <p> Once you've collected all the parts and tools, it's time to put this thing together. </p>
          <p> The first step is to drill the enclosure for the three footswitches and the USB cable. You'll want to drill a small pilot hole to help keep your 1/2" bit in the right place. </p>
          <img src="img/tutorial/drilled_enclosure.jpg" style="width: 500px"/>
          <p> With the holes drilled, the next step is to start wiring the electronics. I like to install the footswitches into the enclosure first to make sure my wire lengths are correct, but that is up to you. </p>
          <img src="img/tutorial/basic_schematic.png"/>
          <p> The wiring here is very simple. When the footswitch is closed, the pin on the microcontroller will be pulled to ground, triggering a key press. </p>
          <img src="img/tutorial/wiring_in_enclosure.jpg" style="width: 500px"/>
          <p> Next, plug the USB cable into the Arduino, thread it through the hole in the side, and install the plastic strain relief. Screw the bottom plate back onto the enclosure, and you're done with the hardware!</p>
          <p> Now it's time to program the Arduino with the ManyKey firmware. If you haven't already, download and install the Arduino IDE from <a href="https://www.arduino.cc/en/Main/Software">arduino.cc</a>. Next, you'll want to download the code from <a href="https://github.com/epbarger/manykey_firmware_arduino">the github repo</a>, and open it in the Arduino IDE.</p>
          <img src="img/tutorial/arduino_ide.png" style="width: 550px"/>
          <p>Connect your new keyboard to the computer with the USB cable. If you've never connected the chip to the computer before, you may get some driver installation popups. Once that's all taken care of, select "Arduino Leonardo" as the device type in the Arduino IDE menu. Select the correct port from the port dropdown as well.</p>
          <p>If you wired the switches to different pins than the default 2, 4, and 6, you will want to change the <i>BUTTON_COUNT</i> and <i>buttonPins</i> variables.</p>
          <p>At this point you should be ready to flash the Arduino. Hit that "Upload" button! Once the upload finishes, try hitting the buttons on your keyboard to confirm everything is working correctly.</p>
        </div>

        <hr>
        <h3 id="writer">Using ManyKey Writer</h3>
        <div>
          <p> You're now ready to connect your new keyboard to your computer and program some useful functionality onto it! </p>
          <p> If you haven't already, download the ManyKey Writer software <a href="https://github.com/epbarger/manykey_writer/releases"> here</a>. Unzip the archive and run the app (macOS) or exe (Windows). Once the software is running, connect your new keyboard to a USB port on your computer. If you're on Windows, a driver dialog may pop up - let it do its thing.</p>
          <p> Once you're ready, click the "Refresh Devices" button to populate the dropdown. In the dropdown, select your device - it is very likely to be identified as "Arduino Leonardo". If you do not see anything that looks like your device, try reconnecting your keyboard and restarting ManyKey Writer.</p>
          <p> If everything has gone correctly, ManyKey writer will have loaded the current key configuration off your keyboard automatically, and should look like the screenshot below. </p>
          <img src="img/tutorial/writer_1.png"/>
          <p> Next, let's make the keyboard do something more than print out a single letter. </p>
          <p> We've been using the Mac version of ManyKey Writer, so let's give our foot keyboard some macOS functionality. I'm going to set it up so that the left button switches between active apps, the middle button prints "abc", and the right button goes back in the browser. Here's what that looks like.</p>
          <img src="img/tutorial/writer_2.png"/>
          <p> The first line is defining the action for "Switch 0", which is the first switch we declared in the Arduino code. In this case, we know that is the left button. Our action is defined as "LEFT_GUI TAB". Actions are a list of keys separated by spaces. The complete list of compatible keys can be found <a href="https://github.com/epbarger/manykey_writer/blob/master/README.md">here</a>.</p>
          <p> The second line is "a b c". This is telling the keyboard to press the "a", "b", and "c" keys all at once. It is not telling the computer to print "abc". This distinction is important. To illustrate this, take the example of setting the key to "a b c a b". This would also print "abc" on the computer while pressed, because the "a" and "b" keys can not be pressed twice at the same time. </p>
          <p> The final line is pretty simple, "RIGHT_GUI LEFT_ARROW". This key combination will make most browsers on macOS go back. </p>
          <p> With new key combinations entered, we can now write to the keyboard. Hit that "Write" button! </p>
          <img src="img/tutorial/writer_3.png"/>
          <p> After clicking "OK", the software will automatically read the new configuration back from the keyboard. This will let you confirm that your commands were successfully saved. Everything you write to the keyboard is saved into special memory called EEPROM - this means your settings will persist even after disconnecting your keyboard from the computer.</p>
          <p> What if you want your keyboard to control something that doesn't have a keyboard shortcut? You create a keyboard shortcut of course! Software like <a href="https://autohotkey.com/">AutoHotkey (for Windows)</a>, or <a href="https://github.com/tekezo/Karabiner">Karabiner (for macOS)</a> can help you set up custom keyboard shortcuts. And once you have those, you should be good to go!</p>

        <hr>
        <h3 id="conclusion">Conclusion</h3>
        <div>
          <p>At this point you should have a functional macro keyboard. Nice job!</p>
          <br>
        </div>
      </div>
    </div>


  </body>
</html>
